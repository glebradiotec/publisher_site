{% extends "base.html" %}

{% block body_class %}admin-page{% endblock %}

{# Убираем публичные элементы из админки #}
{% block background_blobs %}{% endblock %}
{% block publisher_banner %}{% endblock %}

{% block content %}
<div class="flex min-h-screen -mt-4">
    <!-- Sidebar -->
    <aside class="w-[220px] shrink-0 bg-white/80 dark:bg-surface-dark/80 backdrop-blur-xl border-r border-gray-200/60 dark:border-gray-700/40 flex flex-col"
           style="position: sticky; top: 0; height: 100vh; z-index: 40;">
        <div class="px-5 pt-5 pb-3">
            <a href="/admin" class="flex items-center gap-2 no-underline">
                <div class="w-8 h-8 rounded-lg bg-primary flex items-center justify-center">
                    <svg width="16" height="16" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="12" height="12" rx="2"/><line x1="6" y1="5" x2="10" y2="5"/><line x1="6" y1="8" x2="10" y2="8"/><line x1="6" y1="11" x2="8" y2="11"/></svg>
                </div>
                <span class="font-display font-bold text-base text-text-main dark:text-white">CMS</span>
            </a>
        </div>

        <nav class="flex-1 px-3 py-2 space-y-0.5 text-[13px] font-medium">
            <a href="/admin/dashboard" class="flex items-center gap-2.5 px-3 py-2 rounded-lg transition-all no-underline
                {{ 'bg-primary/10 text-primary font-semibold' if request.endpoint == 'admin_dashboard' else 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5 hover:text-gray-900 dark:hover:text-white' }}">
                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="5" height="5" rx="1"/><rect x="9" y="2" width="5" height="5" rx="1"/><rect x="2" y="9" width="5" height="5" rx="1"/><rect x="9" y="9" width="5" height="5" rx="1"/></svg>
                Дашборд
            </a>
            <a href="/admin/journals" class="flex items-center gap-2.5 px-3 py-2 rounded-lg transition-all no-underline
                {{ 'bg-primary/10 text-primary font-semibold' if request.endpoint in ('admin_journals', 'admin_journal_add', 'admin_journal_edit') else 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5 hover:text-gray-900 dark:hover:text-white' }}">
                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 13.5A1.5 1.5 0 015.5 12H14"/><path d="M5.5 2H14v14H5.5A1.5 1.5 0 014 14.5v-11A1.5 1.5 0 015.5 2z"/></svg>
                Журналы
            </a>
            <a href="/admin/users" class="flex items-center gap-2.5 px-3 py-2 rounded-lg transition-all no-underline
                {{ 'bg-primary/10 text-primary font-semibold' if request.endpoint == 'admin_users' else 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5 hover:text-gray-900 dark:hover:text-white' }}">
                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 14v-1a3 3 0 00-3-3H5a3 3 0 00-3 3v1"/><circle cx="7" cy="5" r="3"/><path d="M16 14v-1a3 3 0 00-2-2.83"/><path d="M11 2.17a3 3 0 010 5.66"/></svg>
                Пользователи
            </a>
            <a href="/admin/backups" class="flex items-center gap-2.5 px-3 py-2 rounded-lg transition-all no-underline
                {{ 'bg-primary/10 text-primary font-semibold' if request.endpoint == 'admin_backups' else 'text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5 hover:text-gray-900 dark:hover:text-white' }}">
                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 10v3a1 1 0 01-1 1H3a1 1 0 01-1-1v-3"/><polyline points="5 7 8 10 11 7"/><line x1="8" y1="10" x2="8" y2="2"/></svg>
                Бэкапы
            </a>
            <a href="/" class="flex items-center gap-2.5 px-3 py-2 rounded-lg text-primary hover:bg-primary/10 font-semibold transition-all no-underline">
                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l5-5 5 5"/><path d="M4 14h10a1 1 0 001-1V9"/><path d="M2 9v4a1 1 0 001 1"/></svg>
                На главную
            </a>
        </nav>

        <div class="px-3 pb-4 space-y-0.5 text-[13px] font-medium border-t border-gray-200/60 dark:border-gray-700/40 pt-3 mt-auto">
            <a href="/admin/logout" class="flex items-center gap-2.5 px-3 py-2 rounded-lg text-gray-500 dark:text-gray-400 hover:bg-red-50 dark:hover:bg-red-500/10 hover:text-red-600 dark:hover:text-red-400 transition-all no-underline">
                <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 14H3a1 1 0 01-1-1V3a1 1 0 011-1h3"/><polyline points="10 11 14 8 10 5"/><line x1="14" y1="8" x2="6" y2="8"/></svg>
                {{ current_user.display_name }}
            </a>
        </div>
    </aside>

    <!-- Main content area -->
    <div class="flex-1 min-w-0 bg-gray-50/50 dark:bg-background-dark">
        <div class="p-6 lg:p-8 max-w-[1200px]">
            {% block admin_content %}{% endblock %}
        </div>
    </div>
</div>
{% endblock %}

{% block footer %}{% endblock %}

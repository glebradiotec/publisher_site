<header class="sticky top-4 z-50 w-full px-4 sm:px-6 lg:px-8">
    <div class="max-w-[1200px] mx-auto bg-white/70 [data-theme=dark]:bg-surface-dark/70 backdrop-blur-xl border border-white/50 [data-theme=dark]:border-white/10 rounded-2xl shadow-sm">
        <div class="flex h-16 items-center justify-between px-4 sm:px-6">

            <!-- Language switcher -->
            <div class="flex items-center gap-1">
                <button id="lang-ru" class="lang-btn" title="–†—É—Å—Å–∫–∏–π" style="background:none; border:none; padding:0; cursor:pointer; opacity:0.5; transition:opacity 0.3s; font-size:28px; line-height:1;">üá∑üá∫</button>
                <button id="lang-en" class="lang-btn" title="English" style="background:none; border:none; padding:0; cursor:pointer; opacity:0.5; transition:opacity 0.3s; font-size:28px; line-height:1;">üá¨üáß</button>
            </div>

            <!-- Navigation -->
            <nav class="hidden md:flex items-center gap-8">
                <a class="text-sm font-semibold text-text-main/70 hover:text-primary transition-colors [data-theme=dark]:text-gray-300 no-underline" href="/journals">–ñ—É—Ä–Ω–∞–ª—ã</a>
                <a class="text-sm font-semibold text-text-main/70 hover:text-primary transition-colors [data-theme=dark]:text-gray-300 no-underline" href="/search">–ü–æ–∏—Å–∫</a>
                <a class="text-sm font-semibold text-text-main/70 hover:text-primary transition-colors [data-theme=dark]:text-gray-300 no-underline" href="/about">–û –Ω–∞—Å</a>
                <a class="text-sm font-semibold text-text-main/70 hover:text-primary transition-colors [data-theme=dark]:text-gray-300 no-underline" href="/contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                <a class="text-sm font-semibold text-text-main/70 hover:text-primary transition-colors [data-theme=dark]:text-gray-300 no-underline" href="/delivery">–î–æ—Å—Ç–∞–≤–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞</a>
            </nav>

            <!-- Right side -->
            <div class="flex items-center gap-3">
                {% if current_user.is_authenticated %}
                <!-- –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω: CMS + –í—ã–π—Ç–∏ -->
                <a href="/admin" class="hidden sm:flex items-center gap-1.5 text-sm font-semibold text-text-main/70 [data-theme=dark]:text-gray-300 hover:text-primary px-3 py-2 rounded-lg hover:bg-gray-50 [data-theme=dark]:hover:bg-white/5 transition-all no-underline">
                    <svg width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="12" height="12" rx="2"/><line x1="6" y1="5" x2="10" y2="5"/><line x1="6" y1="8" x2="10" y2="8"/><line x1="6" y1="11" x2="8" y2="11"/></svg>
                    CMS
                </a>
                <a href="/admin/logout" class="hidden sm:flex items-center gap-1.5 text-sm font-bold text-red-500/80 hover:text-red-600 px-3 py-2 rounded-lg hover:bg-red-50 [data-theme=dark]:hover:bg-red-500/10 transition-all no-underline">
                    <svg width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 14H3a1 1 0 01-1-1V3a1 1 0 011-1h3"/><polyline points="10 11 14 8 10 5"/><line x1="14" y1="8" x2="6" y2="8"/></svg>
                    –í—ã–π—Ç–∏
                </a>
                {% else %}
                <!-- –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω: –í–æ–π—Ç–∏ -->
                <a href="/admin/login" class="hidden sm:flex items-center gap-1.5 text-sm font-bold text-text-main [data-theme=dark]:text-white hover:text-primary px-3 py-2 rounded-lg hover:bg-gray-50 [data-theme=dark]:hover:bg-white/5 transition-all no-underline">
                    <svg width="15" height="15" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 14h3a1 1 0 001-1V3a1 1 0 00-1-1h-3"/><polyline points="6 11 2 8 6 5"/><line x1="2" y1="8" x2="10" y2="8"/></svg>
                    –í–æ–π—Ç–∏
                </a>
                {% endif %}

                <button id="theme-toggle" class="flex items-center justify-center w-10 h-10 rounded-xl border border-gray-200 [data-theme=dark]:border-gray-700 hover:border-primary hover:text-primary transition-colors bg-white/50 [data-theme=dark]:bg-surface-dark/50" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
                    <span id="theme-icon" class="material-symbols-outlined text-[20px]">dark_mode</span>
                </button>
            </div>
        </div>
    </div>
</header>

<style>
    .lang-btn:hover { opacity: 0.8 !important; }
    .lang-btn.active { opacity: 1 !important; }
</style>

<script>
    // Theme toggle
    var savedTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', savedTheme);
    if (savedTheme === 'dark') document.documentElement.classList.add('dark');
    else document.documentElement.classList.remove('dark');
    updateThemeIcon(savedTheme);

    document.getElementById('theme-toggle').addEventListener('click', function() {
        var current = document.documentElement.getAttribute('data-theme');
        var newTheme = current === 'light' ? 'dark' : 'light';
        document.documentElement.setAttribute('data-theme', newTheme);
        if (newTheme === 'dark') document.documentElement.classList.add('dark');
        else document.documentElement.classList.remove('dark');
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(newTheme);
    });

    function updateThemeIcon(theme) {
        document.getElementById('theme-icon').textContent = theme === 'dark' ? 'light_mode' : 'dark_mode';
    }

    // Language switcher
    (function() {
        var lang = localStorage.getItem('lang') || 'ru';
        setLang(lang);
        document.getElementById('lang-ru').addEventListener('click', function() { setLang('ru'); });
        document.getElementById('lang-en').addEventListener('click', function() { setLang('en'); });
        function setLang(l) {
            localStorage.setItem('lang', l);
            document.documentElement.setAttribute('data-lang', l);
            document.getElementById('lang-ru').classList.toggle('active', l === 'ru');
            document.getElementById('lang-en').classList.toggle('active', l === 'en');
        }
    })();

</script>
